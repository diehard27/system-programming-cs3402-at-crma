#summary การเขียนโปรแกรมด้วย Perl 3
<table width=500>
<td>
[CourseSchedule2555_2 กลับไปหน้าหลัก]-->[<a href="https://code.google.com/p/system-programming-cs3402-at-crma/wiki/CourseSchedule2555_2#ตารางเรียน_๒๕๕๕/๒">ตารางเรียน</a>]==>Next: [perlProg4 การโปรแกรม Perl 4]<br>
[perlProg2 Previous]<==
<wiki:toc max_depth="3" />

=Conditions=
เงื่อนไขใน perl สามารถกำหนดได้ด้วยประโยคคำสั่ง if/else ตามรูปแบบต่อไปนี้
{{{
if(<condition>) {
  ..do something
}
else {
  ..do other thing
}
}}}
หรือในรูปแบบ elseif
{{{
if(<condition>) {
  ..do something
}
elseif {
  ..do other thing
}
elseif {
  ..do more thing
}
}}}


โดยที่ condition ใน Perl จะเป็นไปตามตารางต่อไปนี้
||Operation ||Numeric Version ||String Version||
||น้อยกว่า ||< ||lt||
||น้อยกว่าหรือเท่ากับ ||<=|| le||
||มากกว่า|| >|| gt||
||มากกว่าหรือเท่ากับ|| >=|| ge||
||เท่ากับ|| == ||eq||
||ไม่เท่ากับ||!=|| ne||
||เปรียบเทียบ ||<=> ||cmp||

{{{
# cond1.pl
$a = 1;
$b = 7;
print "a=$a, b=$b\n";
if($a == $b)
{
print "numbers are equal\n";
}
else
{
print "numbers are not equal\n";
}
#
$c = 7.3;
$d = 7.3;
print "c=$c, d=$d\n";
if($c == $d)
{
print "numbers are equal\n";
}
else
{
print "numbers are not equal\n";
}
}}}
รันสคริปต์ cond1.pl จะได้ผลลัพธ์ดังนี้
{{{
prachya@pcubusrv104> perl cond1.pl
a=1, b=7
numbers are not equal
c=7.3, d=7.3
numbers are equal
}}}

{{{
# cond2.pl
$char1 = 'a';
$char2 = 'A';
print "char1=$char1, char2=$char2\n";
if($char1 eq $char2)
{
print "characters are equal"
}
else
{
print "characters are not equal";
}
print "\n";
#
$string1 = "willi";
$string2 = "willI";
print "string1=$string1, string2=$string2\n";
if($string1 ne $string2)
{
print "string1 is not the same as string2\n";
}
else
{
print "strings 1 and string2 are the same\n";
}
}}}
เมื่อรันสคริปต์จะได้ผลลัพธ์
{{{
prachya@pcubusrv104> perl cond2.pl
char1=a, char2=A
characters are not equal
string1=willi, string2=willI
string1 is not the same as string2
}}}

=Arguments=
Perl สามารถรับค่า arguments มาจากการรันผ่านเชลล์ได้ เช่น hello.pl 12 34 56 คล้ายกับการผ่านค่าตัวแปรเข้าสู่โปรแกรมในเชลล์สคริปต์
==ตัวแปร $ARGV==
ตัวแปร $ARGV เป็นอาเรย์ของสตริงของ arguments ที่ส่งผ่าน command line เข้ามายังสคริปต์ของเพิร์ล สามารถอ้างถึงตัวแปรเหล่านั้นด้วยการกำหนดดัชนี โดยตัวแปรตัวแรกใช้ดัชนีเท่ากับ 0 เช่น {{{$ARGV[0]}}} ยกตัวอย่างเช่นหากรันโปรแกรม
{{{
perl hello.pl 12 34
}}}
แล้วค่าของ {{{$ARGV[0]}}} คือ 12 ส่วน {{{$ARGV[1]}}} คือ 34
==จำนวนตัวแปร $#ARGV==
โปรแกรมเมอร์สามารถหาจำนวนตัวแปรที่ส่งเข้ามายังสคริปต์ได้จากตัวแปร {{{$#ARGV}}} เช่นจากตัวอย่างการรัน hello.pl สคริปต์ข้างต้นจะได้ค่า {{{$#ARGV}}} เท่ากับ 1 หากไม่ม่ตัวแปรส่งผ่านเข้ามา ค่าของ {{{$#ARGV}}} จะมีค่าเท่ากับ -1

ตัวอย่าง perl สคริปต์ต่อไปนี้แสดงให้เห็นความสัมพันธ์ของการส่งตัวแปรเข้าไปยังสคริปต์จาก command line
{{{
# arg.pl
print "arg count=$#ARGV\n";
print "0=$ARGV[0]\n";
print "1=$ARGV[1]\n";
print "2=$ARGV[2]\n";
}}}
ผลของการรันสคริปต์ที่มีการส่งผ่านตัวแปร
{{{
prachya@pcubusrv104> perl arg.pl 12 34 56
arg count=2
0=12
1=34
2=56
}}}
ผลของการรันสคริปต์ที่ไม่มีการส่งผ่านตัวแปรเข้าไป จะมีค่าของ $#ARGV= -1
{{{
prachya@pcubusrv104> perl arg.pl
arg count=-1
0=
1=
2=
}}}

ตัวอย่างต่อไปนี้เป็นสคริปต์ mycal.pl ที่ใช้ตัวแปร ARGV ในการคำนวณแบบเครื่องคิดเลข
{{{
#!/usr/bin/perl -w
#SRC: http://www.cyberciti.biz/faq/howto-pass-perl-command-line-arguments/
if ($#ARGV != 2 ) {
        print "usage: mycal number1 op number2\neg: mycal 5 + 3 OR mycal 5 - 2\n";
        exit;
}
$n1=$ARGV[0];
$op=$ARGV[1];
$n2=$ARGV[2];
$ans=0;
if ( $op eq "+" ) {
        $ans = $n1 + $n2;
}
elsif ( $op eq "-"){
        $ans = $n1 - $n2;
}
elsif ( $op eq "/"){
        $ans = $n1 / $n2;
}
elsif ( $op eq "*"){
        $ans = $n1 * $n2;
}
else {
        print "Error: op must be +, -, *, / only\n";
        exit;
}
print "$ans\n";
}}}
ผลลัพธ์ของการรันสคริปต์ mycal.pl
{{{
prachya@pcubusrv104> ./mycal.pl
usage: mycal number1 op number2
eg: mycal 5 + 3 OR mycal 5 - 2
prachya@pcubusrv104> ./mycal.pl 5 + 3
8
prachya@pcubusrv104> ./mycal.pl 34 / 3
11.3333333333333
}}}

=Perl Special Variable=
||Variable Name	||Description||
||{{{$_}}}||	The default parameter for a lot of functions.||
||$.||	Holds the current record or line number of the file handle that was last read. It is read-only and will be reset to 0 when the file handle is closed.||
||$/||	Holds the input record separator. The record separator is usually the newline character. However, if $/ is undefined, the Perl reads the entire file as one input file.||
||$,||	The output separator for the print() function. Normally, this variable is an empty string. However, setting $, to a newline might be useful if you need to print each element in the parameter list on a separate line.||
||$\||	Added as an invisible last element to the parameters passed to the print() function. Normally, an empty string, but if you want to add a newline or some other suffix to everything that is printed, you can assign the suffix to $\.||
||$#||	The default format for printed numbers. Normally, it's set to %.20g, but you can use the format specifiers covered in the section "Example: Printing Revisited" in Chapter 9 to specify your own default format.||
||$%||	Holds the current page number for the default file handle. If you use select() to change the default file handle, $% will change to reflect the page number of the newly selected file handle.||
||$=||	Holds the current page length for the default file handle. Changing the default file handle will change $= to reflect the page length of the new file handle.||
||$-||	Holds the number of lines left to print for the default file handle. Changing the default file handle will change $- to reflect the number of lines left to print for the new file handle.||
||$~||	Holds the name of the default line format for the default file handle. Normally, it is equal to the file handle's name.||
||$^||	Holds the name of the default heading format for the default file handle. Normally, it is equal to the file handle's name with {{{_TOP}}} appended to it.||
|| $| ||	If nonzero, will flush the output buffer after every write() or print() function. Normally, it is set to 0.||
||$$||	This UNIX-based variable holds the process number of the process running the Perl interpreter.||
||$?||	Holds the status of the last pipe close, back-quote string, or system() function. You can find more information about the $? variable in Chapter 13, "Handling Exceptions and Signals."||
||$&||	Holds the string that was matched by the last successful pattern match.||
||$`||	Holds the string that preceded whatever was matched by the last successful pattern match.||
||$'||	Holds the string that followed whatever was matched by the last successful pattern match.||
||$+||	Holds the string matched by the last bracket in the last successful pattern match. For example, the statement /Fieldname: {{{(.*)}}}|Fldname: {{{(.*)}}}/ && ($fName = $+); will find the name of a field even if you don't know which of the two possible spellings will be used.||
||{{{$*}}}||	Changes the interpretation of the ^ and $ pattern anchors. Setting {{{$*}}} to 1 is the same as using the /m option with the regular expression matching and substitution operators. Normally, {{{$*}}} is equal to 0.||
||$0||	Holds the name of the file containing the Perl script being executed.||
||{{{$<number>}}}||	This group of variables ($1, $2, $3, and so on) holds the regular expression pattern memory. Each set of parentheses in a pattern stores the string that match the components surrounded by the parentheses into one of the {{{$<number>}}} variables.||
||$[||	Holds the base array index. Normally, it's set to 0. Most Perl authors recommend against changing it without a very good reason.||
||$]||	Holds a string that identifies which version of Perl you are using. When used in a numeric context, it will be equal to the version number plus the patch level divided by 1000.||
||$"||	This is the separator used between list elements when an array variable is interpolated into a double-quoted string. Normally, its value is a space character.||
||$;||	Holds the subscript separator for multi-dimensional array emulation. Its use is beyond the scope of this book.||
||$!||	When used in a numeric context, holds the current value of errno. If used in a string context, will hold the error string associated with errno. For more information about errno, see Chapter 13, "Handling Exceptions."||
||$@||	Holds the syntax error message, if any, from the last eval() function call. For more information about errno, see Chapter 13, "Handling Exceptions."||
||$<||	This UNIX-based variable holds the read uid of the current process.||
||$>||	This UNIX-based variable holds the effective uid of the current process.||
||$)||	This UNIX-based variable holds the read gid of the current process. If the process belongs to multiple groups, then $) will hold a string consisting of the group names separated by spaces.||
||$:||	Holds a string that consists of the characters that can be used to end a word when word-wrapping is performed by the ^ report formatting character. Normally, the string consists of the space, newline, and dash characters.||
||$^D||	Holds the current value of the debugging flags. For more information, see Chapter 16, "Debugging Perl."||
||$^F||	Holds the value of the maximum system file description. Normally, it's set to 2. The use of this variable is beyond the scope of this book.||
||$^I||	Holds the file extension used to create a backup file for the in-place editing specified by the -i command line option. For example, it could be equal to ".bak."||
||$^L||	Holds the string used to eject a page for report printing. Chapter 11, "Creating Reports," shows how to use this variable to create simple footers.||
||$^P||	This variable is an internal flag that the debugger clears so it will not debug itself.||
||$^T||	Holds the time, in seconds, at which the script begins running.||
||$^W||	Holds the current value of the -w command line option.||
||$^X||	Holds the full path name of the Perl interpreter being used to run the current script.||
||$ARGV||	Holds the name of the current file being read when using the diamond operator ({{{<>}}}).||
||@ARGV||	This array variable holds a list of the command line arguments. You can use $#ARGV to determine the number of arguments minus one.||
||@F||	This array variable holds the list returned from autosplit mode. Autosplit mode is associated with the -a command line option.
||@INC||	This array variable holds a list of directories where Perl can look for scripts to execute. The list is mainly used by the require statement. You can find more information about require statements in Chapter 15, "Perl Modules."||
||%INC||	This hash variable has entries for each filename included by do or require statements. The key of the hash entries are the filenames, and the values are the paths where the files were found.||
||%ENV||	This hash variable contains entries for your current environment variables. Changing or adding an entry affects only the current process or a child process, never the parent process. See the section "Example: Using the %ENV Variable" later in this chapter.||
||%SIG||	This hash variable contains entries for signal handlers. For more information about signal handlers, see Chapter 13, "Handling Exceptions and Signals."||
||_||	This file handle (the underscore) can be used when testing files. If used, the information about the last file tested will be used to evaluate the new test.||
||DATA||	This file handle refers to any data following __END__.
STDERR	This file handle is used to send output to the standard error file. Normally, this is connected to the display, but it can be redirected if needed.||
||STDIN||	This file handle is used to read input from the standard input file. Normally, this is connected to the keyboard, but it can be changed.||
||STDOUT||	This file handle is used to send output to the standard output file. Normally, this is the display, but it can be changed.||

Source: Devid Metdinets, Perl 5 by Examples, http://affy.blogspot.com/p5be/ch12.htm

=Logical Operators=

=Loops=

==for loop==

==while loop==

==until loop==

==foreach loop==

=goto Statement=

=Mathematical Functions=

=Bitwise Operations=





=References=
  # Wiil-Hans Steeb, et al, _Linux, Shell Programming and Perl_ [http://issc.uj.ac.za/downloads/linux.pdf  PDF]
----
[CourseSchedule2555_2 กลับไปหน้าหลัก]-->[<a href="https://code.google.com/p/system-programming-cs3402-at-crma/wiki/CourseSchedule2555_2#ตารางเรียน_๒๕๕๕/๒">ตารางเรียน</a>]-->Next: [perlProg4 การโปรแกรม Perl 4]

[https://code.google.com/p/system-programming-cs3402-at-crma/w/edit/perlProg3 Edit]