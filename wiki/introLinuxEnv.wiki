#summary การใช้คำสั่งของลินหนิกซ์เบื้องต้น
<table width=500>
<td>
= การใช้คำสั่งของลินหนิกซ์เบื้องต้น =
โดย พ.อ.ปรัชญา เฉลิมวัฒน์, Ph.D   pchalermwat@gmail.com
๒๗ ตุลาคม ๒๕๕๒

==บทนำ==
	การใช้งานลินหนิกซ์สำหรับผู้ดูแลระบบมีความจำเป็นต้องเข้าใจคำสั่งพื้นฐานผ่านคอมแมนด์ไลน์หรือเชลล์เป็นอย่างดี นอกจากนั้นแล้วคำสั่งขั้นก้าวหน้ายังช่วยให้การดูแลระบบเป็นไปได้ด้วยความสะดวก เช่นความสามารถในการโปรแกรมสคริปต์ของเชลล์ หรือแม้แต่การประยุกต์ใช้การเขียนโปรแกรมในภาษาต่าง ๆ เช่น C, Perl, หรือ Python เป็นต้น  เอกสารนี้แนะนำการใช้งานคำสั่งเบื้องต้นของลินหนิกซ์ บนพื้นฐานของ Ubuntu อย่างไรก็ตามผู้อ่านสามารถนำไปประยุกต์ใช้กับลินหนิกซ์อื่น ๆ ได้เป็นส่วนมากไม่ว่าจะเป็น Redhat หรือ Gentoo ก็ตาม  โดยจะกล่าวถึงคำสั่งต่าง ๆ เกี่ยวกับการขอดูข้อมูลพื้นฐานของระบบ การขอความช่วยเหลือ ระบบไฟล์ การจัดการไฟล์ การจัดการเอาท์พุท การค้นหาด้วย grep การเรียกใช้งานโปรแกรม OpenOffice โปรแกรมกราฟฟิกและการประมวลผลข้อมูล คอมไพเลอร์สำหรับภาษาต่าง ๆ  สำหรับผู้ใช้มือใหม่ ผู้เขียนแนะนำให้พิมพ์คำสั่งสรุปใน [1] ซึ่งมีเป็นแผ่นเดียว (สองหน้า) เพื่อใช้เตือนความจำเวลาที่ต้องการใช้คำสั่งพื้นฐานของลินหนิกซ์  ผู้เขียนจะใช้คำภาษาไทยของ Linux ว่าลินหนิกซ์ (ตามการออกเสียงสไตล์อเมริกัน) ซึ่งผู้เขียนบางท่านอาจใช้คำว่า “ลินุกซ์” (ตามสไตล์ยุโรปหรือเยอรมัน) ซึ่งหมายความถึง Linux เดียวกัน และอาจใช้คำว่าเครื่องแม่ข่ายสลับกับคำว่าเซอร์ฟเวอร์

==การขอดูข้อมูลพื้นฐาน==
	คำสั่งต่อไปนี้ผู้ดูแลระบบมักใช้บ่อยเมื่อล็อกอินไปยังเครื่องแม่ข่ายที่ดูแลอยู่ เป็นคำสั่งง่าย ๆ สั้นและจำได้ง่าย


||who||แสดงรายชื่อผู้ที่ล็อกอินออนไลน์อยู่||
||w||คล้ายกับ who แต่แสดงรายการโหลดและการใช้งานเครื่อง||
||last||แสดงรายชื่อผู้ที่เคยล็อกอินมายังเครื่อง ใช้ตรวจสอบว่ามีผู้ใช้แปลกปลอมเข้าเครื่องแม่ข่ายบ้างหรือไม่||
||date||แสดงเวลาและวัน หรือ ปรับเปลี่ยนวันเวลาของเครื่อง||
||cal||แสดงปฏิทิน สามารถเลือกปี เดือน หรือวันที่ต้องการได้||
||uptime||แสดงเวลาที่เครื่องนี้ได้เปิดมาแล้วเครื่องเซอร์ฟเวอร์ที่ดีจะมี uptime ที่นาน||


==การขอความช่วยเหลือ ==
	คำสั่งในลินหนิกซ์มีมากมายจนยากที่จะจำได้ทั้งหมด นอกจากนั้นตัวเลือกหรือการตั้งค่าต่าง ๆ สำหรับแต่ละคำสั่งยังมีให้เลือกอีกจนบางครั้งผู้ใช้ไม่สามารถจะจดจำได้หมด อย่างไรก็ตามระบบการทำงานของยูหนิกซ์นั้นจะมีคำสั่งเพื่อขอดูคำแนะนำการใช้โปรแกรมหรือคำสั่งเหล่านั้นอยู่ออนไลน์ ผู้ใช้เพียงเรียกคำสั่งขอความช่วยเหลือต่อไปนี้เพื่อให้แสดงรายการตัวเลือกที่เราต้องการใช้

||man cmd||ขอดูรายละเอียดการใช้งานโปรแกรม cmd ผู้ใช้สามารถแทน cmd ด้วยคำสั่งอื่น ๆ ที่เราต้องการทราบ เช่น man last เป็นต้น||
||man -k topic||ค้นหารายการความช่วยเหลือของ topic ที่ต้องการ เช่น man -k editor||
||apropos topic||มีค่าเที่ยบเท่ากับ man -k ใช้ในการค้นหาคำสั่งที่เกี่ยวข้องกับ topic ที่กำหนด||
||gnome-help||แสดงผลรายการความช่วยเหลือในกราฟฟิกโหมด (ภายใต้ X วินโดวส์)||
||info||เป็นระบบให้ข้อมูลของ GNU ||


==ระบบไฟล์ และการจัดการไฟล์ ==
	ระบบไฟล์ของลินหนิกซ์ปัจจุบันใช้ระบบ EXT3 มีลักษณะเหมือนรากของต้นไม้ ซึ่งที่เหนือสุดของระบบไฟล์จะเรียกว่า root (แทนด้วยสัญลักษณ์ / หรือสแลช) จาก root นี้จะประกอบด้วยไดเร็กทอรี่ต่าง ๆ  ตามที่ระบบจะจัดการ ภายใต้ไดเร็กทอรี่อาจมีไดเร็กทอรี่หรือไฟล์ซ้อนอยู่หลายชั้นขึ้นอยู่กับการจัดกลุ่มของไฟล์ที่เกี่ยวข้อง 
{{{
	/dir1/dir12/.../dir_n/filename
}}}
	การอ้างถึงชื่อไฟล์หรือไดเร็กทอรี่สามารถอ้างแบบ absolute path คือกำหนดนับมาตั้งแต่ root เช่น /home/prachya/.ssh/examples/ ให้เต็มพาธ (path) หรือใช้การอ้างถึงแบบสัมพัทธ์ เช่น อ้างถึงไดเร็กทอรี่ปัจจุบันจะใช้เครื่องหมายจุด (.) หากอ้างถึงไดเร็กทอรี่ที่อยู่เหนือขี้นไปหนึ่งระดับจะใช้สองจุด (..) และการอ้างถึงไดเร็กทอรี่โฮมสามารถใช้เครื่องหมาย ~ แทนได้เช่น /home/prachya/data1 มีค่าเท่ากับ ~/data1 เมื่อผู้ใช้เป็น prachya และมีโฮมไดเร็กทอรี่อยู่ที่ /home/prachya เป็นต้น
	ฮาร์ดดิสก์ที่ใช้งานจะถูกแบ่งเป็นพาร์ติชั่น โดยแต่ละพาร์ติชั่นอาจถูก mount มายังไดเร็กทอรี่ภายใต้ root ตามที่ผู้ดูแลระบบกำหนด พาร์ติชั่นพิเศษที่ชื่อว่า swap ทำหน้าที่เป็นหน่วยความจำเสมือน (virtual memory) ซึ่งจะช่วยให้ระบบปฏิบัติการสามารถรันโปรแกรมต่างๆ ได้มากว่าที่หน่วยความจำทางกายภาพจะรับได้

||/||ไดเร็กทอรี่เหนือสุดเรียกว่า root ภายใต้ไดเร็กทอรี่นี้จะเป็นจุดเริ่มของ||
||..||ไดเร็กทอรี่เหนือไปหนึ่งระดับ เช่น cd ../.. เปลี่ยนไดเร็กทอรี่ย้อนหลังไปสองระดับ ||
||.||ไดเร็กทอรี่ปัจจุบัน ปกติไม่ค่อยได้ใช้ แต่ใช้ในการระบุให้ชัดเจน||
||pwd||แสดงพาธของไดเร็กทอรี่ปัจจุบัน||
||cd dir||เปลี่ยนไดเร็กทอรี่ไปยัง dir เช่น cd ../../data2/.ssh||
||ls dir||แสดงรายการไฟล์และไดเร็กทอรี่ที่กำหนด ls -l แสดงโดยละเอียด ls -al แสดงรายการที่ซ่อนไว้ด้วย||
||ls -lt||แสดงรายการไฟล์ที่ถูกใช้ล่าสุดก่อน (ชื่อไฟล์ขึ้นต้นจุด . จะไม่ถูกแสดง)||
||du -h||แสดงรายการการใช้งานดิสก์ หน่วยเป็น GBytes||
||quota||แสดงการใช้ดิสก์และระบบโควต้า||
||wc||นับจำนวนคำในไฟล์ (word count) หรือนับบรรทัดในไฟล์ เช่น wc -l||
||df -h||แสดงรายการระบบไฟล์ พาร์ติชั่นที่เมาท์ไปยังไดเร็กทอรี่ต่าง ๆ ของระบบ||
||mount||แสดงรายการพาร์ติชั่นที่ใช้งาน หรือใช้เมาท์พาร์ติชั่นที่กำหนดไปยังไดเร็กทอรี่ที่ต้องการ เช่น mount /dev/hda2 /home||
||umount||ยกเลิการเมาท์ระบบไฟล์เช่น umount /dev/cdrom ||
||cp||สำเนาไฟล์ที่กำหนดเช่น cp /etc/passwd /home/prachya/bak||
||mv||ย้ายไฟล์หรือเปลี่ยนชื่อไฟล์ เช่น mv /home/prachya/file1 /tmp||
||rm||ลบไฟล์ !!ควรใช้ความระมัดระวังสำหรับการลบไฟล์ในระบบยูหนิกซ์เพราะจะไม่สามารถกู้กลับได้ ||
||rmdir||ลบไดเร็กทอรี่ที่กำหนด ไดเร็กทอรี่ต้องว่างหากต้องการลบไดเร็กทอรี่ที่ไม่ว่างสามารถใช้ rm -rf {{{<dir>}}} ไดเร็กทอรี่จะหายไปเลย !!!||
||scp||สำเนาไฟล์ผ่านโปรโตคอล SSH เช่น scp /etc/passwd prachya@seclab.crma.ac.th:file1 ||
||touch||แตะโปรแกรมให้ทำการปรับปรุงข้อมูลเกี่ยวกับเวลา ถ้าไม่มีไฟล์อยู่ไฟล์เปล่า ๆ จะถูกสร้างขึ้นมา เช่น touch new_file||

==การจัดการเอาท์พุทและอินพุท==
	โดยทั่วไปโปรแกรมหรือคำสั่งในลินหนิกซ์จะแสดงผลออกทางหน้าจอเป็นหลัก ผู้ใช้สามารถกำหนดทิศทางของเอาท์พุทนี้ได้ (redirection) เช่นให้ไปที่ไฟล์ หรือที่ดีไวซ์อื่น ๆ ตามที่กำหนด (เช่น เครื่องพิมพ์) หรือส่งผลลัพธ์การแสดงผลต่อไปให้โปรแกรมอื่น (pipeline หรือ pipe) ในทางกลับกันเราสามารถเปลี่ยนอินพุท (ซึ่งปกติเป็นคีย์บอร์ด) ให้เป็นอินพุทจาก่ไฟล์ได้ด้วยเครื่องหมาย <

||cmd > file.out||ส่งผลลัพธ์การรันโปรแกรมไปเก็บไว้ที่ไฟล์ file.out ถ้ามีไฟล์นี้อยู่แล้วไฟล์เก่าจะถูกแทนที่ เช่น dmesg > /tmp/log||
||cmd >> file.out||ส่งผลลัพทธการรันโปรแกรมไปต่อท้ายไฟล์ file.out ถ้าไฟล์นี้ไม่มีอยู่ก็จะถูกสร้างขึ้นมาใหม่  เช่น last >> last.log||
||cmd < infile||นำข้อมูลในไฟล์ชื่อว่า  infile มาเป็นอินพุทของโปรแกรม cmd  เช่น  bc < myscript||
||cmd1 | cmd2||ส่งผลลัพธ์ของโปรแกรม cmd1 ไปเป็นอินพุทของโปรแกรม cmd2 หรือเรียกว่าการไปป์ เช่น cat /etc/passwd | head -5|| 
||cat file1||อ่านข้อมูลจากไฟล์ file1 แล้วแสดงผลที่หน้าจอ สามารถใช้ต่อไฟล์หลายไฟล์ได้ เช่น cat file1 file2 > file3||
||more||แสดงผลหน้าจอทีละจอ ใช้ในกรณีที่มี output ยาวเกินกว่าที่จะแสดงในหนึ่งหน้าจอได้ เช่น ls -l /etc/ | more||
||less||เช่นเดียวกับ more แต่สามารถแสดงย้อนหลังขึ้นไปได้ ค้นหาได้ เช่น less /etc/passwd||
||head -10||แสดงผลเฉพาะส่วนหัวของไฟล์ 10 บรรทัดแรก||
||tail -5||แสดงผลเฉพาะส่วนท้ายของไฟล์ 5 บรรทัดสุดท้าย||
||sort||เรียงลำดับของผลลัพธ์ เช่น sort -n /etc/passwd||
||tr||เปลี่ยนตัวอักษรในไฟล์ให้เป็นตามต้องการ เช่น cat mixed | tr [A-Z] [a-z] > lcase จะแปลงตัวอักษรในไฟล์ mixed ให้เป็นตัวเล็กหมดแล้วเก็บไว้ในไฟล์ lcase||

==การค้นหาด้วย grep, find, locate 	==
	ระบบไฟล์ของลินหนิกซ์มีความซับซ้อนจนบางครั้งการค้นหาไฟล์ต่าง ๆ ด้วยตัวเองอาจไม่สามารถทำได้ เครื่องมือสำหรับการค้นหาไฟล์ หาคำที่อยู่ในไฟล์นั้นมีโปรแกรมที่เป็นประโยชน์คือ grep และ find ส่วนโปรแกรม locate ก็สามารถใช้ค้นหาไฟล์ที่อยู่ในระบบไฟล์ได้เช่นกัน
	โปรแกรม grep เป็นโปรแกรมที่มีประโยชน์มากในการค้นหาคำที่ต้องการในระบบไฟล์ โปรแกรมเกรปใช้ regular expression ในการกำหนดรูปแบบของการค้นหา (และโดยมากโปรแกรมในระบบยูหนิกซ์จะอ้างถึงการค้นหาด้วย regular expression)
||.||อักษร(ตัวเดียว)ใด ๆ||
||\c||ค้นหาอักษร c||
||[...]||ค้นหาอักษรใด ๆ ในวงเล็บ||
||[c1-c2]||อักษรในช่วง c1-c2 เช่น [C-H]||
||[^c1-c2]||อักษรใด ๆ ที่ไม่อยู่ในช่วง c1-c2||
||^||จุดเริ่มต้นของบรรทัด||
||$||จุดสุดท้ายของบรรทัด||
||expr*||ค้นหาคำที่ขึ้นต้นด้วย expr||
||expr1 expr2||ค้นหา expr1 ก่อนแล้วตามด้วย expr2||
||(...)||ใช้สำหรับการจัดกลุ่มของเอ็กเพรสชั่น||
||^$||ค้นหาบรรทัดที่ว่าง||
||^START$||ค้นหาคำว่า START ในบรรทัด (คำเดี่ยว ๆ)||
||^[0-9]||ค้นหาบรรทัดที่ขึ้นต้นด้วยตัวเลขใด ๆ||

ตัวอย่างการใช้งานโปรแกรม grep, find และ locate

||grep -i prachya /etc/passwd||ค้นหาคำว่า prachya (ไม่สนใจว่าเป็นตัวใหญ่เล็ก) ในไฟล์ /etc/passwd||
||grep -ir password /etc||ค้นหาคำว่า password (ตัวใหญ่หรือเล็กก็ได้) โดยค้นแบบ recursive ในทุกไฟล์ภายใต้ไดเร็กทอรี่ /etc||
||locate apache2||ค้นหาไฟล์หรือไดเร็กทอรี่ที่เกี่ยวข้องกับคำว่า apache2||
||find /etc -name “pass*”||ค้นหาไฟล์ที่มีชื่อขึ้นต้นว่า pass||
||find / | wc -l||ค้นหาไฟล์ทุกไฟล์ในระบบแล้วไปป์ไปที่โปรแกรม wc นับบรรทัด จะทำให้ทราบจำนวนไฟล์ทั้งหมดในระบบ||

==คอมไพเลอร์สำหรับภาษาต่าง ๆ==
	คอมไพเลอร์สำหรับพัฒนาโปรแกรมต่าง ๆ ในลินหนิกซ์มีให้อย่างพร้อมสรรพในทุกภาษาที่เป็นภาษาหลัก

||cc|| หรือ gcc เป็นคอมไพล์เลอร์ภาษาซี มีไลบรารี่สนับสนุนมากมาย||
||c++||คอมไพเลอร์ซีพลัสพลัสสำหรับโปรแกรมเชิงวัตถุ||
||javac||คอมไพเลอร์ภาษาจาวา||
||java||รันไทม์ของโปรแกรมจาวา||
||f77||คอมไพเลอร์ฟอร์แทรน 77||
||gfortran||คอมไพเลอร์ฟอร์แทรน95||
||python||ภาษาสคริปต์ที่กำลังได้รับความนิยมอย่างมากในการใช้งาน||
||ruby||ภาษาสคริปต์อีกภาษาที่ได้รับความนิยม||
||tcl||ภาษาสคริปต์ที่ค่อนข้างล้าสมัยและมีผู้ใช้น้อยลง||
||umb-scheme||อินเทอร์พริทเตอร์ของ Lisp แบบ scheme||
||octave||ภาษาโปรแกรมทางคณิตศาสตร์คล้าย Mathlab||
||make||โปรแกรมสำหรับสร้างไบนารี่จากซอร์สโค้ด||

==เอกสารอ้างอิง==
[1] Squadron@powerup.com.au, “The One Page Linux Manual”, May 1999
[2] Darcy S. O'Niel, “Linux Command Summary”, 2001


==แบบฝึกหัด==
1. หากต้องการทราบว่าเครื่องเซอร์ฟเวอร์เปิดทำงานมาเป็นเวลานานเท่าใดแล้วต้องใช้คำสั่งใด?
2. ถ้ารันคำสั่ง cd / แล้วตามด้วยคำสั่ง cd .. และเมื่อรันคำสั่ง pwd เพื่อดูว่าปัจจุบันอยู่ที่ตำแหน่งใดของไดเร็กทอรี่ จะได้ค่าอะไร?
3. อธิบายว่าคำสั่ง  cat /etc/passwd | head -5 |sort -n ทำอะไร?
4. ถ้าผู้ใช้มีล็อกอินเป็น it4502 หลังจากล็อกอินแล้วรันคำสั่งต่อไปนี้ cd /etc แล้ว cd ~/.ssh เมื่อรันคำสั่ง pwd จะได้ค่าเท่ากับเท่าใด?
5. คำสั่ง cal 2010 ทำอะไร?
6. หากต้องการทราบว่าวัน 23 ตุลาคม 2555 นั้นตรงกับวันใด (จันทร์, อังคาร) ต้องใช้คำสั่งใด?
7. หากต้องการค้นหาชื่อไฟล์ที่มีคำว่า “firewall” ในไดเร็กทอรี่ /etc ต้องใช้คำสั่งใดและใช้ตัวเลือกแบบใด?
8. นับจำนวนไฟล์ทั้งหมดในไดเร็กทอรี่ /etc บนเครื่อง seclab.crma.ac.th
9. ตรวจสอบดูว่าฮาร์ดดิสก์บนเครื่องมีพื้นที่เหลือเท่าใด (หน่วยเป็น GB)
10. ตรวจสอบหน่วยความจำว่ามีอยู่เท่าใด?
11. ค้นหาคำสั่งที่เกี่ยวข้องกับคำว่า compress ต้องใช้คำสั่งใด? 
12. หากต้องการทราบผู้ที่ล็อกอินออนไลน์อยู่ในระบบ 5 คนแรกต้องใช้คำสั่งแบบใด?
13. โฮมไดเร็กทอรี่ของ root อยู่ที่ใด?
14. อธิบายข้อแตกต่างระหว่างการอ้างถึงชื่อไฟล์แบบ absolute path กับการอ้างถึงแบบสัมพัทธ์ (relative)?
15. หากรันคำสั่ง cd /etc/init.d แล้วตามด้วยคำสั่ง cd ../../etc และรันคำสั่ง pwd จะให้ผลลัพธ์เป็นอย่างไร?
16. อธิบายการทำงานของคำสั่ง cat /etc/passwd /etc/passwd > /tmp/passwdX2
17. อธิบายข้อแตกต่างระหว่างคำสั่ง more /etc/passwd กับ less /etc/passwd
18. จงหาคำตอบพร้อมทั้งอธิบายการทำงานของคำสั่ง wc -l < /etc/passwd
19. หากต้องการลบไดเร็กทอรี่ที่ไม่ว่างต้องทำอย่างไร?
20. อธิบายการทำงานของคำสั่ง mount และ umount
21. Regular Expression คืออะไร? ใช้ประโยชน์อย่างไร?
22. คำสั่ง grep "prachya\|sup" /etc/passwd ทำอะไร?
23. คำสั่ง more /etc/passwd กับคำสั่ง more </etc/passwd กับคำสั่ง cat /etc/passwd |more ให้ผลลัพธ์ต่างกันหรือไม่?
24. จงเขียนคำสั่งเพื่อค้นหา (แบบไม่ recursive) จำนวนครั้งที่ค้นพบคำว่า library (ไม่สนใจว่าตัวพิมพ์ใหญ่หรือเล็ก) ภายใต้ไดเร็กทอรี่ /etc (hint: ใช้คำสั่ง grep ร่วมกับ wc)