#summary แนะนำ Perl
<table width=500>
<td>
[CourseSchedule2555_2 กลับไปหน้าหลัก]-->[<a href="https://code.google.com/p/system-programming-cs3402-at-crma/wiki/CourseSchedule2555_2#ตารางเรียน_๒๕๕๕/๒">ตารางเรียน</a>]-->Next: [perlProg2 การโปรแกรม Perl 2]
<wiki:toc max_depth="3" />

=แนะนำ Perl=
เพิร์ล (Perl) ย่อมาจาก Practical Extraction and Report Language เป็นภาษาโปรแกรมแบบสคริปต์ที่นิยมอย่างแพร่หลายใน  Unix, Linux, MVS, VMS, MS/DOS, Macintosh, OS/2, Amiga, รวมถึงระบบปฏิบัติการอื่น ๆ เพิร์ล มีฟังก์ชันต่างๆ ที่มีประสิทธิภาพในการจัดการสตริง และในช่วงวิวัฒนาการของเทคโนโลยีเว็บนั้นเป็นสิ่งที่ได้รับความนิยมแพร่หลายในการสร้าง web interface gateway ที่รู้จักดีในนาม CGI (Common Gateway Interface) ซึ่งการรันฟังก์ชันต่าง ๆ ของเซอร์ฟเวอร์จะต้องทำผ่าน CGI เท่านั้นไม่สามารถจะใช้งานได้โดยตรงด้วยเหตุผลทางด้านความปลอดภัย โดยผู้ใช้งานเว็บจะมองไม่เห็นส่วนที่เป็นสคริปต์ของเพิร์ล แต่จะสามารถเรียกใช้งานผ่านการเรียกของ HTML เท่านั้น

Perl รวบรวมขีดความสามารถที่เด่นของ C, sed, awk, และ sh ซึ่งโปรแกรมเมอร์ที่คุ้นเคยกับภาษาเหล่านี้สามารถใช้งาน perl ได้อย่างไม่ยากเย็น รูปแบบประโยคคำสั่งมีลักษณะคล้ายภาษา C ทีเหนือกว่านั้นคือ perl ไม่มีการกำหนดขนาดของข้อมูลตราบใดที่ผู้ใช้งานยังมีหน่วยความจำเหลือให้ใช้ perl สามารถนำข้อมูลในไฟล์ทั้งไฟล์มาไว้ในตัวแปรสตริงตัวเดียว การทำ recursion ไม่มีการกำหนดชั้นความลึกของการเรียกตัวเอง และตารางที่ใช้ hashes หรือ associative arrays สามารถเพิ่มขนาดได้โดยไม่มีผลต่อประสิทธิภาพของการทำงานของซีพียู นอกจากนั้น perl ยังใช้การค้นหาสตริงที่มีประสิทธิภาพสูง และมีความสลับซับซ้อนที่ยากที่จะเขียนโปรแกรมในภาษาระดับสูงอื่นมาแทนได้

ตัวอย่างการทำงานของเพิร์ลที่มีประสิทธิภาพมาก เมื่อเทียบกับการต้องใช้โปรแกรมอื่นที่สลับซับซ้อนกว่า เช่น find, awk, หรือ sed เช่น หากต้องการเปลี่ยนข้อความที่เหมือนกันในไฟล์หลายๆไฟล์ แทนที่จะไปค้นหาไฟล์ทีละไฟล์ทำการแก้ไขและบันทึก เราสามารถใช้คำสั่งของเพิร์ลได้ง่าย เช่น 

{{{
perl -e ’s/gopher/World Wide Web/gi’ -p -i.bak *.html
}}}

อธิบายคำสั่งนี้เป็น 3 ส่วนคือ
ตัวโปรแกรมเพิร์ล
{{{
perl -e
}}}
ตัวเลือกซึ่งในที่นี้เป็นคำสั่งในภาษาเพิร์ลให้ค้นหาคำและแทนคำ
{{{
’s/gopher/World Wide Web/gi’
}}}
ตัวเลือกที่เกี่ยวข้องกับไฟล์ที่นำมาปฏิบัติ
{{{
 -p -i.bak *.html
}}}

ผู้ใช้รันคำสั่งนี้ที่พร็อมพ์ของลิหนิกซ์ เพื่อรันคำสั่งสั้นๆของเพิร์ล ในการค้นหา (ด้วยตัวเลือก s/) คำว่า "gopher" ถ้าหากพบให้แทนที่คำด้วยคำ "World Wide Web" โดยที่ตัวเลือกสุดท้าย (/gi) นั้นให้แทนทุกคำที่พบแบบไม่เป็น case sensitive โดยไฟล์ที่เป็นเป้าหมายคือไฟล์ที่ขึ้นต้นชื่อด้วย {{{i.bak*.html}}} ทั้งหมดที่อยู่ในไดเร็กทอรี่ปัจจุบัน เช่น ไฟล์ i.bak02.html หรือไฟล์ i.bakanyfile.html เป็นต้น

=โปรแกรมแรกในเพิร์ล=
ประโยคคำสั่งในภาษาเพิร์ลจะจบท้ายด้วยเซมิโคล่อน (;) ทดลองรันคำสั่งของเพิร์ลแบบ interactive ด้วยกันรันเพิร์ลแล้วกด {{{<Enter>}}} จากนั้นป้อนคำสั่งต่อไปนี้ลงท้ายด้วยเซมิโคล่อน
{{{
> perl <Enter> 
$a = 5; 
$b = 4; 
$c = $a + $b; 
print($c);
}}}
คำสั่งตามลำดับจะแสดงผลลัพธ์ของ c ซึ่งเท่ากับ a+b  จากนั้นให้กด Ctrl-d เพื่อรันโปรแกรม (ในลิหนิกซ์) ส่วนในวินโดวส์ให้กด Ctrl-z แทน

เราสามารถใช้เอดิเตอร์เขียนโปรแกรม myfirst.pl ได้เช่นเดียวกับการเขียนโปรแกรมในภาษาอื่น เครื่องหมาย {{{#}}} เป็นการแสดงว่าบรรทัดนั้นเป็น comment ไม่มีการปฏิบัติคำสั่งใดๆ
{{{
# myfirst.pl 
$a = 5; 
$b = 4; 
$c = $a + $b; 
print($c);
}}}

หลังจากบันทึกไฟล์ myfirst.pl แล้วให้รันคำสั่งต่อไปนี้เพื่อให้สคริปต์ทำงานตามต้องการ
{{{
perl  myfirst.pl
}}}

=แบบฝึกหัด=
1) สร้างไฟล์ชื่อ f1.txt ให้มีข้อมูลดังนี้
{{{
a
b
c
}}}
2) รันคำสั่งเพื่อสำเนาไฟล์ ไปไว้ที่ f2.txt
{{{
cp  f1.txt  f2.txt
}}}
3) รันคำสั่งต่อไปนี้ เพื่อเปลี่ยน 'b' ในไฟล์ f1.txtg ให้เป็น 'Black'
{{{
perl -e 's/b/Black/gi' -p -i f1.txt 
}}}
4) ตรวจสอบผลการทำงานของเพิร์ลด้วยคำสั่ง diff
{{{
prachya@pcubusrv104> diff -y f1.txt  f2.txt
}}}
ซึ่งจะให้ผลลัพธ์ที่หน้าจอดังนี้
{{{
a                                                               a
Black                                                         | b
c                                                               c
}}}
ในกรณีที่ต้องการทำกับหลายไฟล์สามารถใช้ wildcard ได้เช่น 
{{{
perl -e 's/b/Black/gi' -p -i f*.txt 
}}}
ซึ่งเพิร์ลจะทำการเปลี่ยนข้อความที่มี 'b' ให้เป็น 'Black' ในทุกไฟล์ที่ขึ้นต้นด้วย f และลงท้ายด้วย .txt

[CourseSchedule2555_2 กลับไปหน้าหลัก]-->[<a href="https://code.google.com/p/system-programming-cs3402-at-crma/wiki/CourseSchedule2555_2#ตารางเรียน_๒๕๕๕/๒">ตารางเรียน</a>]-->Next: [perlProg2 การโปรแกรม Perl 2]